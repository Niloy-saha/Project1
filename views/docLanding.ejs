<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
        <link rel="stylesheet" href="/css/docstyles.css"/>
        <title>Doctor Profile</title>
    </head>
    <body>
        <%- include('partials/navbar-Login') %>
        <div class="container">
            <h1 class="doc-header">Welcome, 
                <%= name %></h1>
            <div class="row doc-info">
                <div class="col-lg-8 col-sm-12">
                    <h4>
                        <b>Name</b>
                        -
                        <%= name %></h4>
                    <h4><%= degree %></h4>
                    <h4>
                        <b>Email</b>
                        -
                        <%= email %></h4>
                    <h4>
                        <b>Mobile</b>
                        -
                        <%= phNum %></h4>
                    <h4>
                        <b>Address</b>
                        -
                        <%= address %></h4>
                </div>
                <div class="col-lg-4 col-sm-12">
                    <% if(gender === "male"){ %>
                        <img src="/images/DocM.jpg" height="200px" width="200px"/>
                    <% } else { %>
                        <img src="/images/DocF.jpg" height="200px" width="200px"/>
                    <% } %>
                </div>
            </div>


            <div class="appointmentHandling">
                <h2 style="color: #FFC93C;">
                    <b>Your Pending Appointment Requests</b>
                </h2>
              <% if(pending.length == 0){ %>
                  <h4>Currently you dont have any pending requests !!</h4>
              <% } else { %>
                  <div class="pendingAppointments row">
                    <% pending.forEach((elem) => { %>
                        <div class="appointmentsCard">
                            <h4><b>Name -</b>
                                <%=elem.patientName%></h4>
                            <h4><b>Mail - </b><%=elem.email%></h4>
                            <h4><b>Requested Date-</b>
                                <%=elem.date%></h4>
                            <h4><b>Requested TimeSlot - </b>
                                <%=elem.slotTime%></h4>
                            <h4>
                                <b>Description -</b>
                                <%=elem.description%></h4>
                            <div style="display: flex; justify-content: space-evenly;">
                                <form action="/user/acceptAppointment" method="POST">
                                    <input value="<%=elem.patientName%>" name="name" style="display: none;">
                                    <input value="<%=elem.email%>" name="email" style="display: none;">
                                    <input value="<%=elem.date%>" name="date" style="display: none;">
                                    <input value="<%=elem.slotTime%>" name="slotTime" style="display: none;">
                                    <input value="<%=elem.description%>" name="description" style="display: none;">
                                    <input value="<%=elem.id%>" name="id" style="display: none;">
                                    <input value="<%=docId%>" name="docId" style="display: none;">
                                    <input value="<%=email%>" name="demail" style="display: none;">
                                    <div class="inputActions" style="margin-right: 20px ;">
                                        <button type="submit">Accept</button>
                                    </div>
                                </form>
                                <form action="/user/rejectAppointment" method="POST">
                                    <input value="<%=elem.patientName%>" name="name" style="display: none;">
                                    <input value="<%=elem.email%>" name="email" style="display: none;">
                                    <input value="<%=elem.date%>" name="date" style="display: none;">
                                    <input value="<%=elem.slotTime%>" name="slotTime" style="display: none;">
                                    <input value="<%=elem.description%>" name="description" style="display: none;">
                                    <input value="<%=elem.id%>" name="id" style="display: none;">
                                    <input value="<%=docId%>" name="docId" style="display: none;">
                                    <div class="inputActions">
                                        <button type="submit">Reject</button>
                                    </div>
                                </form>

                            </div>
                        </div>
                    <%  }) %>
                </div>
              <% } %>
                


                <div class="upcomingAppointments">
                    <h2 style="color: #FFC93C;">
                        <b>Your Upcoming Appointments</b>
                    </h2>
                    <div class="Appointments row">
                        <% booked.forEach((elem) => { %>
                            <div class="appointmentsCard">
                                <h4><b>Name -</b>
                                    <%=elem.patientName%></h4>
                                <h4><b>Mail - </b><%=elem.email%></h4>
                                <h4><b>Description -</b></h4>
                                  <h4><%=elem.description%></h4>
                                <h4>On <b><%=elem.date%></b> at <b><%=elem.slotTime%></b></h4>  
                            </div>
                        <%  }) %>
                    </div>
                </div>
            </div>
        </div>

        <%- include('partials/footer') -%>
    </body>
</html>
